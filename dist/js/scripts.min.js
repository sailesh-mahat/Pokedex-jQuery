var pokemonRepository=function(){var n=[],t="https://pokeapi.co/api/v2/pokemon/?limit=150",o=$("#modal-container");function e(t){n.push(t)}function i(){$("#modal-container").removeClass("is-visible")}return $(window).on("keydown",n=>{"Escape"===n.key&&$("#modal-container").hasClass("is-visible")&&i()}),$("#modal-container").on("click",function(n){$(n.target).is(o)&&i()}),{add:e,getAll:function(){return n},addListItem:function(n){var t=$("<p>"+n.name+"</p>"),o=$('<button type="button" class="btn btn-secondary">view details</button>'),e=$('<li class="list-group-item"></li>');e.append(t),e.append(o),$(".list-group").append(e),o.on("click",function(t){var o;o=n,pokemonRepository.loadDetails(o).then(function(){pokemonRepository.showModal(o)})})},loadList:function(){return $.ajax(t).then(function(n){n.results.forEach(function(n){e({name:n.name,detailsUrl:n.url})})}).catch(function(n){console.error(n)})},loadDetails:function(n){return $.ajax(n.detailsUrl).then(function(t){n.imageUrl=t.sprites.front_default,n.height=t.height,n.types=t.types.map(function(n){return" "+n.type.name}),n.ability=t.abilities.map(function(n){return" "+n.ability.name})}).catch(function(n){console.error(n)})},showModal:function(n){$("#modal-container").html("");var t=$('<div class="modal-dialog"></div>'),e=$('<button type="button" class="btn btn-secondary">Close</button>');e.on("click",i);var a=$("<h1>"+n.name+"</h1>"),s=$("<p>height: "+n.height+"</p>"),l=$('<img class="modal-image"></img>');l.attr("src",n.imageUrl);var p=$("<p>Type: "+n.types+"</p>"),r=$("<p>Abilities: "+n.ability+"</p>"),c=$('<div class = "modal-content">');c.append(e).append(a).append(l).append(s).append(p).append(r),t.append(c),o.append(t).addClass("is-visible")},hideModal:i}}();pokemonRepository.loadList().then(function(){pokemonRepository.getAll().forEach(function(n){pokemonRepository.addListItem(n)})});
